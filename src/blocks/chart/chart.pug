//- Options:
//- ðŸž‚ title: string    - Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð¿Ð¾ÑÐ»Ðµ ÑÑƒÐ¼Ð¼Ñ‹ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¹ ÑÐµÐºÑ†Ð¸Ð¹ Ð´Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
//- ðŸž‚ gap: number      - Ñ€Ð°Ð·Ð¼ÐµÑ€ Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð° Ð¼ÐµÐ¶Ð´Ñƒ ÑÐµÐºÑ†Ð¸ÑÐ¼Ð¸ Ð´Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
//- ðŸž‚ duration: number - Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ð¸ Ð´Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
//- ðŸž‚ sections: [{     - ÑÐµÐºÑ†Ð¸Ð¸ Ð´Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
//-   ðŸž‚ name: string   - Ð¸Ð¼Ñ ÑÐµÐºÑ†Ð¸Ð¸
//-   ðŸž‚ value: number  - Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ ÑÐµÐºÑ†Ð¸Ð¸
//-   ðŸž‚ gradient: [    - Ð³Ñ€Ð°Ð´Ð¸ÐµÐ½Ñ‚ ÑÐµÐºÑ†Ð¸Ð¸
//-     ðŸž‚ [0]: string  - ID Ð³Ñ€Ð°Ð´Ð¸ÐµÐ½Ñ‚Ð°
//-     ðŸž‚ [1]: string  - Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ†Ð²ÐµÑ‚ Ð³Ñ€Ð°Ð´Ð¸ÐµÐ½Ñ‚Ð°
//-     ðŸž‚ [2]: string  - ÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ð¹ Ñ†Ð²ÐµÑ‚ Ð³Ñ€Ð°Ð´Ð¸ÐµÐ½Ñ‚Ð°
//-     ]
//-   ]}

mixin chart(options)
  -
    const defaults = {
      title: 'Ð³Ð¾Ð»Ð¾ÑÐ¾Ð²',
      gap: 0.6,
      duration: 500,
      sections: [
        {
          name: 'Ð Ð°Ð·Ð¾Ñ‡Ð°Ñ€Ð¾Ð²Ð°Ð½',
          value: 0,
          gradient: ['bad', '#919191', '#3d4975'],
        },
        {
          name: 'Ð£Ð´Ð¾Ð²Ð»ÐµÑ‚Ð²Ð¾Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾',
          value: 65,
          gradient: ['average', '#bc9cff', '#8ba4f9'],
        },
        {
          name: 'Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾',
          value: 65,
          gradient: ['good', '#6fcf97', '#66d2ea'],
        },
        {
          name: 'Ð’ÐµÐ»Ð¸ÐºÐ¾Ð»ÐµÐ¿Ð½Ð¾',
          value: 130,
          gradient: ['excellent', '#ffe39c', '#ffba9c'],
        },
      ],
    };

  -
    const {
      title,
      gap,
      duration,
      sections,
    } = Object.assign(defaults, options);

  .chart
    ._container
      ._diagram
        svg._svg(viewbox='0 0 33 33')
          defs._defs
            each item in sections
              lineargradient._gradient(id=item.gradient[0], x1='1', y1='1', x2='0', y2='0')
                stop._stop(offset='0', stop-color=item.gradient[1])
                stop._stop(offset='1', stop-color=item.gradient[2])

          - const sum = sections.reduce((sum , current) => sum + current.value, 0);
          - let offset = -gap / 2;
          each item in sections
            - const percent = (item.value / sum) * 100 || 0;
            - const array = `${Math.max(0, percent - gap)} 100`;
            circle._circle(r='15.9', cx='50%', cy='50%', style=`--duration: ${duration}ms; --stroke: url(#${item.gradient[0]}); --array:${array}; --offset:${offset};`, data-value=item.value)
            - offset -= percent;
        ._title
          span._sum
            | 0
          | #{title}
        ._tooltip(style='--top: 0; --left: 0; --borderColor: #000000;')
          ._name
            | #{sections[0].name}
          ._details(style='--gradient: linear-gradient(#ffffff, #000000);')
            | #{title}:
            span._value
              | #{sections[0].value}
    ul._legend
      each item in sections
        li._item
          button._button.-active(type='button', style=`--gradient: linear-gradient(${item.gradient[1]}, ${item.gradient[2]});`)
            | #{item.name}
